<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caf√© My Capiz | App Pedidos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .capiz-brown { color: #4a3427; }
        .bg-capiz { background-color: #4a3427; }
        .category-card { transition: all 0.2s; cursor: pointer; aspect-ratio: 1/1; }
        .category-card:active { transform: scale(0.95); }
    </style>
</head>
<body class="bg-gray-100 pb-32">

    <header class="bg-white p-4 text-center shadow-sm sticky top-0 z-50">
        <img src="cafe-my-capiz.PNG" alt="Logo" class="mx-auto w-20 mb-1">
        <h1 class="text-lg font-bold capiz-brown uppercase">CAF√â MY CAPIZ</h1>
        <p class="text-[8px] font-bold text-gray-400">DESARROLLADO POR VIBRAS POSITIVAS</p>
    </header>

    <section id="view-user" class="p-6">
        <div class="bg-white p-6 rounded-3xl shadow-xl border-t-8 border-orange-500">
            <h2 class="text-xl font-black mb-4 capiz-brown italic uppercase">Tus Datos de Env√≠o</h2>
            <div class="space-y-4">
                <input type="text" id="name" placeholder="Tu Nombre" class="w-full p-3 bg-gray-50 rounded-xl outline-none ring-1 ring-gray-200">
                <input type="text" id="address" placeholder="Direcci√≥n en Caucasia" class="w-full p-3 bg-gray-50 rounded-xl outline-none ring-1 ring-gray-200">
                <input type="tel" id="phone" placeholder="Tu Celular" class="w-full p-3 bg-gray-50 rounded-xl outline-none ring-1 ring-gray-200">
                <button onclick="saveUser()" class="w-full bg-orange-600 text-white font-black py-4 rounded-xl shadow-lg uppercase">Ingresar al Men√∫</button>
            </div>
        </div>
    </section>

    <section id="view-home" class="hidden">
        <div class="bg-capiz text-white p-3 flex justify-between items-center px-6 shadow-md">
            <div class="text-left">
                <p class="text-[9px] opacity-70 uppercase font-bold">Enviando a:</p>
                <p id="label-address" class="text-xs font-black"></p>
            </div>
            <button onclick="editUser()" class="text-[9px] bg-white text-capiz px-3 py-1 rounded-full font-bold">EDITAR DATOS</button>
        </div>

        <div class="p-4 grid grid-cols-2 gap-4">
            <div onclick="showCat('BEBIDAS CALIENTES')" class="category-card bg-white rounded-3xl p-5 shadow-md border-b-8 border-orange-500 flex flex-col items-center justify-center">
                <i class="fas fa-mug-hot text-2xl text-orange-500 mb-2"></i>
                <span class="font-black text-[10px] uppercase">Cafeter√≠a</span>
            </div>
            <div onclick="showCat('BRUNCH')" class="category-card bg-white rounded-3xl p-5 shadow-md border-b-8 border-amber-700 flex flex-col items-center justify-center">
                <i class="fas fa-egg text-2xl text-amber-800 mb-2"></i>
                <span class="font-black text-[10px] uppercase">Brunch</span>
            </div>
            <div onclick="showCat('WAFFLES')" class="category-card bg-white rounded-3xl p-5 shadow-md border-b-8 border-yellow-400 flex flex-col items-center justify-center">
                <i class="fas fa-stroopwafel text-2xl text-yellow-500 mb-2"></i>
                <span class="font-black text-[10px] uppercase">Waffles</span>
            </div>
            <div onclick="showCat('PLATOS FUERTES')" class="category-card bg-white rounded-3xl p-5 shadow-md border-b-8 border-red-600 flex flex-col items-center justify-center">
                <i class="fas fa-utensils text-2xl text-red-600 mb-2"></i>
                <span class="font-black text-[10px] uppercase">Fuertes</span>
            </div>
        </div>
    </section>

    <section id="view-menu" class="hidden p-4">
        <button onclick="showView('home')" class="text-orange-600 font-black text-xs mb-4"><i class="fas fa-arrow-left"></i> VOLVER</button>
        <h2 id="cat-title" class="text-xl font-black capiz-brown mb-4 uppercase"></h2>
        <textarea id="notes" placeholder="¬øC√≥mo quieres tu pedido? (Ej: Huevos blandos)" class="w-full p-4 text-xs bg-white rounded-2xl mb-4 h-16 outline-none ring-1 ring-gray-200 shadow-sm"></textarea>
        <div id="p-list" class="space-y-3"></div>
    </section>

    <div id="cart" class="fixed bottom-20 left-4 right-4 bg-orange-600 text-white p-4 rounded-2xl shadow-2xl flex justify-between items-center hidden z-50">
        <div><span id="c-qty" class="font-black text-lg">0</span> <span class="text-[10px] font-bold">ITEMS</span></div>
        <div class="text-right">
            <p id="c-total" class="text-lg font-black">$0</p>
            <button onclick="send()" class="bg-white text-orange-600 text-[10px] font-black px-4 py-1 rounded-full uppercase">Confirmar Pedido</button>
        </div>
    </div>

    <nav class="fixed bottom-0 w-full bg-white border-t flex justify-around p-3 z-50">
        <button onclick="showView('home')" class="text-orange-600 flex flex-col items-center">
            <i class="fas fa-home text-lg"></i><span class="text-[8px] font-bold">INICIO</span>
        </button>
        <button onclick="send()" class="text-gray-400 flex flex-col items-center">
            <i class="fab fa-whatsapp text-lg"></i><span class="text-[8px] font-bold">PEDIR</span>
        </button>
    </nav>

    <script>
        const menu = {
            'BEBIDAS CALIENTES': [
                {id:1, n:'Capuchino Baileys', p:17000, d:'Caf√©, leche y crema whiskey'},
                {id:2, n:'Caf√© Latte', p:11000, d:'Cremoso y suave'},
                {id:3, n:'Arom√°tica Frutos Rojos', p:8000, d:'Natural y vibrante'}
            ],
            'BRUNCH': [
                {id:4, n:'Desayuno Capiz', p:21900, d:'Huevos, jam√≥n, arepa y aguacate'},
                {id:5, n:'Sart√©n Mexicano', p:23000, d:'Napolitana, jalape√±o y queso'}
            ],
            'WAFFLES': [
                {id:6, n:'Waffle Nutella Capiz', p:22000, d:'Con helado y fresas'},
                {id:7, n:'Waffle Pan de Bono', p:22000, d:'Masa de pandebono reci√©n horneada'}
            ],
            'PLATOS FUERTES': [
                {id:8, n:'Lasa√±a de Carne', p:32000, d:'Artesanal con mucho queso'},
                {id:9, n:'Alitas x16', p:48000, d:'Salsa a elecci√≥n y papas'}
            ]
        };

        let cart = {};
        let user = JSON.parse(localStorage.getItem('capiz_user'));

        if(user) { showView('home'); document.getElementById('label-address').innerText = user.address; }

        function saveUser() {
            const n = document.getElementById('name').value;
            const a = document.getElementById('address').value;
            const p = document.getElementById('phone').value;
            if(!n || !a || !p) return alert("Llena tus datos");
            user = {name:n, address:a, phone:p};
            localStorage.setItem('capiz_user', JSON.stringify(user));
            document.getElementById('label-address').innerText = a;
            showView('home');
        }

        function editUser() { 
            document.getElementById('name').value = user.name;
            document.getElementById('address').value = user.address;
            document.getElementById('phone').value = user.phone;
            showView('user'); 
        }

        function showView(id) {
            document.getElementById('view-user').classList.add('hidden');
            document.getElementById('view-home').classList.add('hidden');
            document.getElementById('view-menu').classList.add('hidden');
            document.getElementById('view-' + id).classList.remove('hidden');
        }

        function showCat(c) {
            showView('menu');
            document.getElementById('cat-title').innerText = c;
            const list = document.getElementById('p-list');
            list.innerHTML = '';
            menu[c].forEach(i => {
                const q = cart[i.id] ? cart[i.id].q : 0;
                list.innerHTML += `<div class="bg-white p-4 rounded-3xl flex justify-between items-center shadow-sm border-l-8 border-orange-500">
                    <div><h4 class="font-bold text-xs">${i.n}</h4><p class="text-[9px] text-gray-400">${i.d}</p><span class="font-black text-orange-600">$${i.p.toLocaleString()}</span></div>
                    <div class="flex items-center gap-3 bg-gray-100 p-2 rounded-full">
                        <button onclick="upd(${i.id},-1,'${i.n}',${i.p})" class="w-6 h-6 bg-white rounded-full shadow text-xs">-</button>
                        <span id="q-${i.id}" class="text-xs font-bold">${q}</span>
                        <button onclick="upd(${i.id},1,'${i.n}',${i.p})" class="w-6 h-6 bg-orange-500 text-white rounded-full shadow text-xs">+</button>
                    </div>
                </div>`;
            });
        }

        function upd(id, ch, n, p) {
            if(!cart[id]) cart[id] = {q:0, n:n, p:p};
            cart[id].q += ch; if(cart[id].q < 0) cart[id].q = 0;
            document.getElementById('q-' + id).innerText = cart[id].q;
            let tot = 0, q = 0;
            for(let k in cart) { tot += cart[k].q * cart[k].p; q += cart[k].q; }
            document.getElementById('cart').classList.toggle('hidden', q === 0);
            document.getElementById('c-qty').innerText = q;
            document.getElementById('c-total').innerText = '$' + tot.toLocaleString();
        }

        function send() {
            const nt = document.getElementById('notes').value;
            let m = `*PEDIDO CAF√â MY CAPIZ*\nüë§ *Cliente:* ${user.name}\nüìç *Dir:* ${user.address}\n\n`;
            let t = 0;
            for(let k in cart) { if(cart[k].q > 0) { m += `‚Ä¢ ${cart[k].q}x ${cart[k].n} ($${(cart[k].q * cart[k].p).toLocaleString()})\n`; t += cart[k].q * cart[k].p; } }
            if(t === 0) return;
            m += `\nüìù *Notas:* ${nt || 'Sin notas'}\nüí∞ *TOTAL: $${t.toLocaleString()}*`;
            window.location.href = `https://wa.me/573207907331?text=${encodeURIComponent(m)}`;
        }
    </script>
</body>
</html>
